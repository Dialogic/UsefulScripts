{
  "name": "Usefulscripts",
  "tagline": "This is a collection of tools and scripts that can be used to monitor, administrate or troubleshoot your Dialogic platform",
  "body": "# UsefulScripts\r\nThis is a collection of tools and scripts that can be used to monitor, administrate or troubleshoot your Dialogic PowerMedia XMS platform.\r\n\r\n## Obtaining the scripts\r\nA zip file with the latest version of the scripts can always be found at https://github.com/Dialogic/UsefulScripts/archive/master.zip\r\nor checked out via git from https://github.com/Dialogic/UsefulScripts.git\r\n\r\nThis can be obtained directly from you XMS shell by executing\r\n``` bash\r\nwget https://github.com/Dialogic/UsefulScripts/archive/master.zip\r\n```\r\n\r\nIndividual scripts can be accessed directly\r\n``` bash\r\nwget  https://raw.githubusercontent.com/Dialogic/UsefulScripts/master/xmsinfo.sh\r\n```\r\n_Note: After downloading or extracting the files you may need to change the permissions of the files before they can be executed via the `chmod +x *.sh`_\r\n\r\n\r\n## Script details\r\n### xmsinfo.sh\r\nThis bash script can be used to collect system level information and logs.  It is used to gather and review data for debugging issues with the XMS services or the OS environment.\r\n\r\n_Note: It is recommended that this script be run with root access either as root account or via sudo_\r\n\r\nBy default it will create a tgz in the local directory named xmsinfo-YYY-MM-DD_hh-mm-ss.tgz, but a different location/path can be passed in via command line argument\r\n\r\nUsage:\r\n``` bash\r\nxms# ./xmsinfo.sh  \r\n```\r\nor\r\n``` bash\r\nxms# ./xmsinfo.sh /path/to/myfilename.tgz  \r\n```\r\nor\r\n``` bash\r\nxms$ sudo ./xmsinfo.sh\r\n```\r\n\r\nThis script will collect the following and save it in additionalinfo.out\r\n+ Network configuration (ip address, firewall, port usage)\r\n+ System information (OS version, CPU info, Mem)\r\n+ Package info (rpms install)\r\n+ Process information (ps, env, cron task list)\r\n+ Usage / performance data (top, sar, free, uptime, df)\r\n\r\nThe script will also export the data in the xmsWebUI and store it in webuiinfo.out, and will also detect and list out saved media files and cache information into mediafileinfo.out\r\n\r\nIt will package the above with all the xms config files, lic information, XMS logs, HMP(media core) logs and system message logs into the tgz\r\n\r\n### gracefulShutdown.sh\r\nThis bash script can be used to begin a graceful shutdown of the XMS services.  \r\n\r\nBy default the graceful shutdown timer is set to 6 mins, but this line `SHUTDOWNTIMER=360` in the script can be changed to the desired values\r\n\r\nThe `gracefulShutdown.log` will contain the details from the script execution.\r\n\r\nUsage:\r\n``` bash\r\nxms# ./gracefulShutdown.sh  \r\n```\r\n\r\n### gracefulRestart.sh\r\nThis bash scripts can be used to begin a graceful shutdown of the XMS services followed by a restart\r\n\r\nBy default the graceful shutdown timer is set to 6 mins, but this line `SHUTDOWNTIMER=360` in the script can be changed to the desired values\r\n\r\nThe `gracefulRestart.log` will contain the details from the script execution.\r\n\r\nUsage:\r\n``` bash\r\nxms# ./gracefulRestart.sh  \r\n```\r\n\r\n### cacheClear.sh\r\nThis bash script can be used to clear the cache of any files that may be there.  \r\n\r\nThis can be useful as it has been found that allowing the cache to expand to a large number of files can impact the fetch and play times on the system.\r\n\r\nThe `cacheClear.log` will contain the details from the script execution.\r\n\r\n_Note: It is recommended that this script be run with root access either as root account or via sudo_\r\n\r\nUsage:\r\n``` bash\r\nxms# ./cacheClear.sh\r\n```\r\n\r\n### cacheClearandDisable.sh\r\nThis bash script can be used to clear the cache of any files that may be there.  Also, this version of the script will disable the caching of http files.\r\n\r\nThis can be useful as it has been found that allowing the cache to expand to a large number of files can impact the fetch and play times on the system.  It is recommended that applications that are playing a large number of files with different filenames or files that are not frequently reused (voicemail, custom messaging, etc) disable the cache or frequently clear the cache backlog.\r\n\r\nThe `cacheClearandDisable.log` will contain the details from the script execution.\r\n\r\n_Note: It is recommended that this script be run with root access either as root account or via sudo_\r\n\r\nUsage:\r\n``` bash\r\nxms# ./cacheClearandDisable.sh\r\n```\r\n\r\n### monitor.sh\r\nThis bash script can be used to monitor system level and XMS level resources.  It is useful for monitoring systems in case of failure conditions and to capture performance and environmental data.\r\n\r\nThis can be used to log information over a long period of time or to simply view the information via the terminal.\r\n\r\nInformation gathered and displayed on screen each loop:\r\n- System memory/CPU/disk space\r\n- Several XMS meters (SipSessions, RTP sessions, lic counters)\r\n- High CPU usage threads and processes\r\n- Top information for XMS internal processes\r\n- Network 4xx/5xx error counters\r\n\r\nAdditional detailed information will be saved in the \"xxxx-output.txt\" files that can be reviewed for historical data.\r\n\r\nThe screen output will be updated every 15seconds and the historical data files will be compressed to a tgz file every 240 loops (240x15=3600seconds or 1 h).  This timing can be changed by modifying the `COUNTTILLZIP=240` and `SLEEPTIME=15` at the top of the script.\r\n\r\n_Note: It is recommended that this script be run with root access either as root account or via sudo_\r\n\r\nUsage:\r\n``` bash\r\nxms# ./monitor.sh\r\n```\r\nto run in the background\r\n``` bash\r\nxms# nohup ./monitor.sh > /dev/null &\r\n```\r\n\r\nSample output:\r\n``` bash\r\n16-06-05_19:55:28.501 - xms [1 out of 240]\r\nDisk/Mem Usage:\r\n             total       used       free     shared    buffers     cached\r\nMem:          7824       5052       2771         11          0       3102\r\n-/+ buffers/cache:       1949       5874\r\nSwap:         8079          0       8079\r\n\r\nCPU Intensive Threads:\r\n\r\nTop Info:\r\n%Cpu(s):  0.7 us,  6.1 sy,  0.0 ni, 93.0 id,  0.0 wa,  0.0 hi,  0.1 si,  0.0 st\r\nKiB Mem:   8011996 total,  5175232 used,  2836764 free,      752 buffers\r\nKiB Swap:  8273916 total,        0 used,  8273916 free.  3176904 cached Mem\r\n\r\n\r\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\r\n10007 root      rt   0 2652480 646256 121436 S   0.0  8.1 709:54.20 ssp_x86Linux_bo\r\n12532 root      20   0  187424   2324   1896 S   0.0  0.0   0:46.40 appmanager\r\n12509 root      20   0  316604  48432  17000 S   0.0  0.6  52:24.44 xmserver\r\n12698 root      20   0 1524784   5216   3312 S   0.0  0.1  10:23.55 msml_main\r\n12692 root      20   0 2525180  25344   7452 S   6.5  0.3  26:12.17 vxmlinterpreter\r\n12546 root      20   0 1639812   4848   3976 S   0.0  0.1   7:02.31 xmsrest\r\n12576 root      20   0  177616   1644   1332 S   0.0  0.0   7:00.27 netann\r\n12514 root      20   0  170116   2504   1536 S   0.0  0.0   0:00.00 httpclient\r\n12598 root      20   0  170116   2500   1536 S   0.0  0.0   0:00.00 httpclient\r\n12850 root      20   0  170116   2504   1536 S   0.0  0.0   0:00.00 httpclient\r\n\r\n\r\nMeters(if available):\r\nxmsResources.xmsRtpSessions = 0\r\nxmsResources.xmsSignalingSessions = 0\r\nmsml.resources.calls.active = 0\r\nmsml.resources.xmscalls.active = 0\r\nxmsResources.xmsMediaTransactions = 0\r\n\r\n\r\nNetwork Error count: 0\r\n```\r\n\r\n### genXMScores.sh\r\nThis bash script can be used to collect system level information and cores for the running XMS processes.\r\n\r\nBy default it will create a directory named xmscores-YYY-MM-DD_hh-mm-ss and save in it the core files, executable binaries and xmsinfo output.\r\n\r\nThe script will also try and obtain the backtrace for each of the core files and will save it to `corebtinfo.log`\r\n\r\n\r\n_Note: It is recommended that this script be run with root access either as root account or via sudo_\r\n\r\nUsage:\r\n``` bash\r\nxms# ./genXMScores.sh  \r\n```\r\n\r\n## License\r\nCopyright Â© 2016 Dialogic Corporation.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of this sample software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, and /or sublicense the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n__Third Party Software__\r\n\r\nThird party software (e.g., drivers, utilities, operating system components, etc.) which may be distributed with the Software will also be subject to the terms and conditions of any third party licenses, which may be supplied with such third party software.\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}